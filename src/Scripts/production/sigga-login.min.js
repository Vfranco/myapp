sigga.controller("login",["$scope","Core","Form","$http","$window",function(e,a,t,r,s){e.statusError=!1,e.btnStatusLogin=!1,e.messageError="",e.btnStart="Ingresar",e.dologin=function(){t.validate("#frm-init-login",".required")?(e.statusError=!0,e.messageError="Ingrese sus datos, para crear su cuenta"):(e.btnStatusLogin=!0,e.btnStart="...",r.post("/authentication/login",{userAcl:e.user,passAcl:CryptoJS.MD5(e.pass).toString()}).then(function(t){t.data.status?(e.btnStart="Ingresando ...",r.post("/authentication/createsesion",{email:e.user}).then(function(t){t.data.status&&(s.location.href=t.data.redirect),e.btnStatusLogin=!0})):(e.statusError=!0,e.messageError=a.isEmpty(t.data.message)?"Usuario no registrado, crea tu cuenta Sigga":t.data.message,e.btnStatusLogin=!1,e.btnStart="Ingresar")}))}}]),sigga.controller("registro",["$scope","$http","Core","Form",function(e,a,t,r){e.statusError=!1,e.showStrongPassword=!1,e.btnStatusRegister=!1,e.messageError="",e.btnStart="Crear mi Cuenta",e.pass="",e.btnRegister=!0,e.acceptTerms=!1,e.typeError="danger",e.createdUser=!1,e.correo="",e.badEmail=!0,e.emailExist=!1,e.messageEmailExist="",e.checkEmail=function(){t.isEmpty(e.correo)?(e.emailExist=!1,e.messageEmailExist=""):e.correo.match(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/)?a.post(baseurl+"usuarios/checkemail",{correo:e.correo}).then(function(t){t.data.status,e.emailExist=!0,e.messageEmailExist=t.data.message}):e.btnRegister=!0},e.doRegister=function(){if(r.validate("#frm-init-register",".required"))e.statusError=!0,e.messageError="Por favor, ingresa tus datos para crear tu cuenta";else if(e.acceptTerms){e.btnStart="Estamos creado tu cuenta ...",e.btnStatusRegister=!0,e.btnRegister=!0;var t={nombres:e.nombres,apellidos:e.apellidos,correo:e.correo,plan:e.plan,pass:CryptoJS.MD5(e.pass).toString()};a.post(baseurl+"usuarios/create",t).then(function(t){t.data.status?(e.statusError=!0,e.typeError="success",e.messageError="Hemos creado tu cuenta Sigga!",e.createdUser=!0):(e.statusError=!0,e.typeError="danger",e.messageError=t.data.message),e.btnStart="Crear mi Cuenta",e.btnStatusRegister=!1})}else e.statusError=!0,e.typeError="danger",e.messageError="Por favor, acepta nuestro terminos y condiciones"},e.comparePasswords=function(){return e.confirm!=e.pass?(e.btnRegister=!0,"Las contraseñas no coinciden"):e.correo.match(/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/)?void(e.btnRegister=!1):"Bien, coinciden"},e.howStrongIsPassword=function(){if(!(t.isEmpty(e.pass)||e.pass.length<=0))return e.pass.length<=4?"Muy Debil":5<=e.pass.length?e.pass.match(/[\d+]/g)?e.pass.match(/[\w+].+[\d+]/g)?e.pass.match(/[*@"#$%&/)(]/)?(e.btnRegister=!1,"Esa es una buena contraseña"):e.pass.match(/0-9/g)?"Va bien, un caracter especial, y estaria lista!":e.pass.match(/[\w+]/g)?(e.btnRegister=!1,"Algo Fuerte"):"Muy Fuerte":e.pass.match(/[w+].+[\d+]*./g)?(e.btnRegister=!0,"Combinala, con letras tambien"):e.pass.match(/0-9/g)?(e.btnRegister=!0,"Bien, esa es una buena contraseña"):(e.btnRegister=!0,"Algun, numero estaria bien"):(e.btnRegister=!0,"Medio Fuerte"):void 0;e.btnRegister=!0}}]);